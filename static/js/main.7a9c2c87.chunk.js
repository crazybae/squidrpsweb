(this.webpackJsonpsquidrpsweb=this.webpackJsonpsquidrpsweb||[]).push([[0],{56:function(e,t,n){},62:function(e,t,n){},64:function(e,t){},75:function(e,t,n){"use strict";n.r(t);var r=n(7),s=n(22),a=n.n(s),c=(n(56),n(2)),i=n.n(c),o=n(20),d=n(3),u=n(4),h=n(6),l=n(5),b=n(26),p=n(41),j=n(21),f=n(36),x=n(8);var w=function(){var e=Object(r.useState)(!1),t=Object(j.a)(e,2),n=t[0],s=t[1];return n?Object(x.jsxs)(f.a,{variant:"primary",onClose:function(){return s(!1)},dismissible:!0,children:[Object(x.jsx)(f.a.Heading,{children:"Manual"}),Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:"Get master's three cards randomly"}),Object(x.jsx)("li",{children:"Get your three cards randomly"}),Object(x.jsx)("li",{children:"Each card automatically generates five items among rock, paper, scissors by the rules below"}),Object(x.jsx)("li",{children:"Five rock-paper-scissors game determines a round winner"}),Object(x.jsx)("li",{children:"A final winner will be determined through three rounds"})]}),Object(x.jsx)(f.a.Heading,{children:"Rules"}),Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:"\u3131:0 \u3134:1 \u3137:2 \u3139:3 \u3141:4 \u3142:5 \u3145:6 \u3147:7 \u3148:8 \u314a:9 \u314b:10 \u314c:11 \u314d:12 \u314e:13 Triangle:14 --(mod 3)--\x3e 0:rock, 1:paper, 2:scissors"}),Object(x.jsx)("li",{children:"The first four genes and last four genes are assumed as two four-digit integers and are converted samely. E.g., 1234 0203 --(mod 3)--\x3e 1:paper 2:scissors"})]})]}):Object(x.jsx)(b.a,{variant:"info",onClick:function(){return s(!0)},children:"Instruction"})},m=(n(61),n(62),"0x9194C01db602Ed716E9d16Fa60F684DeB3b62523"),g=[1],O="\u270a",v="\u270b",k="\u270c",C={1:{Network:"Ethereum Mainnet",MainCardAddress:"0xBE5C953DD0ddB0Ce033a98f36C981F1B74d3B33f"}},y=["function ownerOf(uint256 tokenId) external view returns (address)","function balanceOf(address owner) external view returns (uint256)","function getGenes(uint256 _tokenId) public view returns (uint8[8])","function getConsonants(uint256 _tokenId) public view returns (string[3])","function getConsonantsIndex(uint256 _tokenId) public view returns (uint8[3])","function tokenOfOwnerByIndex(address owner, uint256 index) external view returns (uint256)","function tokenURI(uint256 _tokenId) public view returns (string)"];function I(e){return document.getElementById(e)}var M=function(e,t){return e===t?0:e===O?t===v?1:-1:e===v?t===k?1:-1:e===k?t===O?1:-1:void 0};function R(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}var A=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={loaded:!1,chainId:0,myAccount:"",mastersCards:[],yourCards:[]},e.componentDidMount=Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"!==typeof window.ethereum){t.next=2;break}return t.abrupt("return",Object(x.jsx)("div",{children:"You need an ethereum wallet extention to play this game ..."}));case 2:return e.provider=new p.a.providers.Web3Provider(window.ethereum),t.next=5,e.startApp();case 5:return t.next=7,e.watchChainAccount();case 7:case"end":return t.stop()}}),t)}))),e.startApp=Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.provider.getNetwork();case 3:if(e.networkId=t.sent.chainId,g.includes(e.networkId)){t.next=6;break}return t.abrupt("return",Object(x.jsx)("div",{children:"Change your wallet network into Mainnet or Rinkeby/Goerli testnet and press F5 ..."}));case 6:return t.next=8,e.provider.listAccounts();case 8:if(!(t.sent.length<=0)){t.next=12;break}return t.next=12,e.connectWallet();case 12:return e.signer=e.provider.getSigner(),t.next=15,e.signer.getAddress();case 15:e.account=t.sent,e.instance=new p.a.Contract(C[e.networkId].MainCardAddress,y,e.provider),e.setState({chainId:e.networkId,loaded:!0,myAccount:e.account}),t.next=25;break;case 20:t.prev=20,t.t0=t.catch(0),console.log(t.t0),alert("Failed to load web3, accounts, or contract. Check console for details."),console.error(t.t0);case 25:case"end":return t.stop()}}),t,null,[[0,20]])}))),e.connectWallet=Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:e.accounts=t.sent;case 3:case"end":return t.stop()}}),t)}))),e.watchChainAccount=Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.provider.on("accountsChanged",(function(t){alert("Account changed"),e.startApp()})),e.provider.on("chainChanged",(function(t){e.startApp(),alert("Network changed to "+C[parseInt(t)].Network)})),e.provider.on("connect",(function(e){alert("Connected to Ethereum network")})),e.provider.on("disconnect",(function(e){alert("Disconnected from Ethereum network")}));case 4:case"end":return t.stop()}}),t)}))),e.getMastersChoices=Object(o.a)(i.a.mark((function t(){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return I("mastersChoices").innerHTML="waiting ...",t.next=3,e.getRandomCards(m,3);case 3:n=t.sent,r='<table class="center" border="1">',n.forEach((function(e){r+="<tr><td>Token ID #".concat(e.tokenID,"</td><td><img src='").concat(e.image,'\' height="100" /></td><td>').concat(e.rps,"</td></tr>")})),r+="</table>",I("mastersChoices").innerHTML=r,e.setState({chainId:e.networkId,loaded:!0,myAccount:e.account,mastersCards:n});case 9:case"end":return t.stop()}}),t)}))),e.getYourRandomChoices=Object(o.a)(i.a.mark((function t(){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.state.mastersCards.length){t.next=3;break}return alert("Press 'Get Master's Choices' first"),t.abrupt("return");case 3:return t.next=5,e.instance.balanceOf(e.account);case 5:if(t.t0=t.sent.toNumber(),0!==t.t0){t.next=9;break}return alert("Your account ".concat(e.account," has no Squid Game cards. Please use another address having cards")),t.abrupt("return");case 9:return I("yourRandomChoices").innerHTML="waiting ...",t.next=12,e.getRandomCards(e.signer.getAddress(),3);case 12:n=t.sent,r='<table class="center" border="1">',n.forEach((function(e){r+="<tr><td>Token ID #".concat(e.tokenID,"</td><td><img src='").concat(e.image,'\' height="100" /></td><td>').concat(e.rps,"</td></tr>")})),r+="</table>",I("yourRandomChoices").innerHTML=r,e.setState({chainId:e.networkId,loaded:!0,myAccount:e.account,yourCards:n});case 18:case"end":return t.stop()}}),t)}))),e.letsRPS=Object(o.a)(i.a.mark((function t(){var n,r,s,a,c,o,d,u,h;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.state.yourCards.length){t.next=3;break}return alert("Press 'Get Your Random Choices' first"),t.abrupt("return");case 3:for(I("rpsResults").innerHTML="waiting ...",n=0,r=0,s="",a=0;a<3;a++){for(c=0,o=0,d=0,s+="<p><b>Round ".concat(a+1,"</b></p>"),u=0;u<5;u++)d=M(e.state.yourCards[a].rps[u],e.state.mastersCards[a].rps[u]),h=void 0,-1===d?(h="You win",c++):1===d?(h="Squid Master wins",o++):h="Draw",s+="<p>  RPS ".concat(u+1,":  ").concat(e.state.yourCards[a].rps[u]," vs ").concat(e.state.mastersCards[a].rps[u]," --\x3e ").concat(h,"</p>");s+="<p>  You : Squid Master = ".concat(c," : ").concat(o,"</p><p></p>"),c>o?n++:c<o&&r++}I("rpsResults").innerHTML=s,I("finalResult").innerHTML=n>r?"<center><font size='20px'><b>You win!</b></font><br><br><img src='./images/youwin.jpg' height=\"400\" /></center>":n<r?"<center><font size='20px'><b>Master wins!</b></font><br><br><img src='./images/masterwins.jpg' height=\"400\" /></center>":"<center><font size='20px'><b>Draw</b></font><br><br><img src='./images/draw.png' height=\"400\" /></center>";case 10:case"end":return t.stop()}}),t)}))),e.getRandomCards=function(){var t=Object(o.a)(i.a.mark((function t(n,r){var s,a,c,o,d,u,h,l,b,p;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.instance.balanceOf(n);case 2:s=t.sent,a=[],c=0;case 5:if(!(c<r)){t.next=27;break}return t.next=8,e.instance.tokenOfOwnerByIndex(n,R(0,s));case 8:return o=t.sent,t.next=11,e.instance.getConsonantsIndex(o);case 11:return d=t.sent,t.next=14,e.instance.getGenes(o);case 14:return u=t.sent,(h=Array.from(d)).push(1e3*u[0]+100*u[1]+10*u[2]+u[3]),h.push(1e3*u[4]+100*u[5]+10*u[6]+u[7]),l=h.map((function(e){var t=e%3;return 0===t?O:1===t?v:k})),t.next=21,e.instance.tokenURI(o);case 21:b=t.sent,p=JSON.parse(atob(b.substring(29))),a.push({tokenID:o.toNumber(),image:p.image,rps:l});case 24:c++,t.next=5;break;case 27:return t.abrupt("return",a);case 28:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(u.a)(n,[{key:"render",value:function(){return this.state.loaded?Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)("h1",{children:"Defeat Squid Master! Rock-Paper-Scissors Game"}),Object(x.jsx)(w,{}),Object(x.jsx)("hr",{}),Object(x.jsxs)("p",{children:["Current network is ",Object(x.jsx)("b",{children:C[this.state.chainId].Network})," having chain ID, ",this.state.chainId]}),Object(x.jsxs)("p",{children:["'Squid Game Card' contract address is ",Object(x.jsx)("b",{children:C[this.state.chainId].MainCardAddress})]}),Object(x.jsxs)("p",{children:["Your address is ",Object(x.jsx)("b",{children:this.state.myAccount})]}),Object(x.jsxs)("table",{children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{width:"400",children:Object(x.jsx)(b.a,{id:"mastersChoicesBtn",onClick:this.getMastersChoices,children:"Get Master's Choices"})}),Object(x.jsx)("td",{width:"400",children:Object(x.jsx)(b.a,{id:"yourChoicesBtn",onClick:this.getYourRandomChoices,children:"Get Your Random Choices"})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("div",{id:"mastersChoices"})}),Object(x.jsx)("td",{children:Object(x.jsx)("div",{id:"yourRandomChoices"})})]})]}),Object(x.jsx)("p",{}),Object(x.jsxs)("table",{children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{width:"400",children:Object(x.jsx)(b.a,{id:"letsRPSBtn",onClick:this.letsRPS,children:"".concat(O," ").concat(v," ").concat(k)})}),Object(x.jsx)("td",{width:"400"})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("div",{id:"rpsResults"})}),Object(x.jsx)("td",{children:Object(x.jsx)("div",{id:"finalResult"})})]})]})]}):Object(x.jsx)("div",{children:"Change your wallet network into Mainnet or Rinkeby/Goerli testnet and press F5 ..."})}}]),n}(r.Component),S=A;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(Object(x.jsx)(S,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[75,1,2]]]);
//# sourceMappingURL=main.7a9c2c87.chunk.js.map